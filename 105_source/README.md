# โ๏ธ ุตูุญุฉ 104: ุงูุชุนูู ููุท - ุจุฏูู ุฃูุงู!

## ๐จ ุชุญุฐูุฑ ููู ุฌุฏุงู!

**ูุฐุง ุงูููุฏ ููุชุนูู ููุท - ูุง ุชุณุชุฎุฏูู ูู ุงูุฅูุชุงุฌ ุฃุจุฏุงู!**

ุงุณุชุฎุฏุงู AWS Access Keys ุนูู ุงูุฎุงุฏู **ุฎุทุฑ ุฃููู ูุจูุฑ**!

## ุงููุญุชูู

### `app.py`
- ุชุทุจูู Flask ูุน boto3
- ูุณุชุฎุฏู AWS Access Keys (ุบูุฑ ุขูู)
- ููุชุนูู ูุงูููู ููุท

### `Dockerfile`
- ุญุงูู Docker ููุชุทุจูู
- ูุณุชูุจู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูู ููุช ุงูุชุดุบูู
- ูุจูู ุนูู Python 3.9

### `s3_policy.json`
- ุณูุงุณุฉ S3 ููุตุญุญุฉ ูุน ุฌููุน ุงูุตูุงุญูุงุช
- ุงุณุชุฎุฏููุง ูุฅูุดุงุก IAM User

### `requirements.txt`
- Flask
- boto3

## ุทุฑู ุงูุชุดุบูู

### ุงูุทุฑููุฉ ุงูุฃููู: Docker (ุงูุฃุณูู) ๐ณ

#### 1. ุจูุงุก ุงูุตูุฑุฉ
```bash
docker build -t flask-s3-app .
```

#### 2. ุชุดุบูู ุงูุญุงูู ูุน ูุชุบูุฑุงุช ุงูุจูุฆุฉ
```bash
docker run -p 8080:8080 \
  -e AWS_ACCESS_KEY_ID="" \
  -e AWS_SECRET_ACCESS_KEY="" \
  -e AWS_DEFAULT_REGION="eu-north-1" \
  -e S3_BUCKET_NAME="flask-app-photos" \
  alwazery/alwazery:flaskappv7.0.0
```

#### 3. ุฃู ุงุณุชุฎุฏุงู ููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
```bash
# ุฅูุดุงุก ููู .env
cat > .env << EOF
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_DEFAULT_REGION=eu-north-1
S3_BUCKET_NAME=your-bucket-name
EOF

# ุชุดุบูู ูุน ููู ุงููุชุบูุฑุงุช
docker run -p 8080:8080 --env-file .env flask-s3-app
```

### ุงูุทุฑููุฉ ุงูุซุงููุฉ: Python ูุจุงุดุฑุฉ ๐

#### 1. ุฅุนุฏุงุฏ AWS Credentials
```bash
# โ๏ธ ุฎุทุฑ ุฃููู - ููุชุนูู ููุท!
export AWS_ACCESS_KEY_ID="AKIA..."
export AWS_SECRET_ACCESS_KEY="your-secret-key"
export AWS_DEFAULT_REGION="eu-north-1"
export S3_BUCKET_NAME="your-bucket-name"
```

#### 2. ุชุซุจูุช ุงููุชุทูุจุงุช
```bash
python3 -m venv .venv
source .venv/bin/activate  # ุนูู Linux/Mac
# ุฃู
.venv\Scripts\activate     # ุนูู Windows
pip install -r requirements.txt
```

#### 3. ุชุดุบูู ุงูุชุทุจูู
```bash
python app.py
```

## ุงุฎุชุจุงุฑ ุงูุชุทุจูู ๐งช

ุงูุชุญ ุงููุชุตูุญ ูุงุฐูุจ ุฅูู:
- **ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ**: http://localhost:8080
- **ูุนุฑุถ ุงูุตูุฑ**: http://localhost:8080/gallery

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ๐

### ูุดููุฉ: Access Denied
```
Error: An error occurred (AccessDenied) when calling the ListObjectsV2 operation
```

**ุงูุญููู:**
1. ุชุฃูุฏ ูู ุตุญุฉ AWS credentials
2. ุชุญูู ูู ูุฌูุฏ ุงูู bucket
3. ุชุฃูุฏ ูู ุตุญุฉ ุงุณู ุงูู bucket ูู ุงููุชุบูุฑ
4. ุชุญูู ูู ุงูููุทูุฉ (region)

### ูุดููุฉ: No module named 'boto3'
```bash
# ุชุฃูุฏ ูู ุชูุนูู ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ
source .venv/bin/activate
pip install -r requirements.txt
```

### ูุดููุฉ: Port already in use
```bash
# ุงุณุชุฎุฏู ูููุฐ ูุฎุชูู
docker run -p 8081:8080 ...
# ุฃู ุงูุชู ุงูุนูููุฉ ุงูููุฌูุฏุฉ
sudo lsof -i :8080
sudo kill -9 <PID>
```

## ุฃูุงูุฑ Docker ูููุฏุฉ ๐ง

```bash
# ุนุฑุถ ุงูุญุงููุงุช ููุฏ ุงูุชุดุบูู
docker ps

# ุฅููุงู ุญุงูู
docker stop <container-id>

# ุนุฑุถ ุณุฌูุงุช ุงูุญุงูู
docker logs <container-id>

# ุงูุฏุฎูู ุฅูู ุงูุญุงูู
docker exec -it <container-id> /bin/bash

# ุญุฐู ุงูุตูุฑุฉ
docker rmi flask-s3-app
```

## โ๏ธ ููุงุฐุง ูุฐุง ุบูุฑ ุขููุ

1. **ูููุงุช ูุฑูุฑ ููุดููุฉ**: AWS keys ูุฎุฒูุฉ ุนูู ุงูุฎุงุฏู
2. **ุงุฎุชุฑุงู ุณูู**: ุฅุฐุง ุงุฎุชุฑู ุงูุฎุงุฏู = ุงุฎุชุฑุงู AWS
3. **ุตูุงุญูุงุช ูุงุณุนุฉ**: ููุณ ุงูููุงุชูุญ ูุฌููุน ุงูุฎูุงุฏู
4. **ูุง ุชูุฌุฏ ูุฑุงุฌุนุฉ**: ุตุนูุจุฉ ุชุชุจุน ูู ุงุณุชุฎุฏู ุงูููุงุชูุญ

## ๐ ุงูุฎุทูุฉ ุงูุชุงููุฉ

ูู ุงูุตูุญุฉ ุงูุชุงููุฉ ุณูุชุนูู **IAM Roles** - ุงูุทุฑููุฉ ุงูุขููุฉ ูููุญ ุตูุงุญูุงุช AWS ููุฎูุงุฏู!
4. **ุฅุฏุงุฑุฉ ุตุนุจุฉ**: ูุฌุจ ุชุบููุฑ ุงูููุงุชูุญ ุจุงูุชุธุงู

## โ ุงูุญู ุงูุขูู

**ุงูุชูู ุฅูู ุตูุญุฉ 105 ูุชุนูู IAM Roles - ุงูุทุฑููุฉ ุงูุขููุฉ!**

๐ ุงูููุฏ ุงูุขูู ูู: `../105_source/`